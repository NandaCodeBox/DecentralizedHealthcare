"use strict";
// Provider validation schemas
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateCapacityInputSchema = exports.providerSearchResultSchema = exports.providerSearchCriteriaSchema = exports.updateProviderInputSchema = exports.createProviderInputSchema = exports.providerSchema = void 0;
exports.validateProvider = validateProvider;
exports.validateCreateProviderInput = validateCreateProviderInput;
exports.validateUpdateProviderInput = validateUpdateProviderInput;
exports.validateProviderSearchCriteria = validateProviderSearchCriteria;
exports.validateUpdateCapacityInput = validateUpdateCapacityInput;
const joi_1 = __importDefault(require("joi"));
const enums_1 = require("../types/enums");
const common_validation_1 = require("./common-validation");
/**
 * Complete provider validation schema
 */
exports.providerSchema = joi_1.default.object({
    providerId: common_validation_1.uuidSchema.required(),
    type: joi_1.default.string().valid(...Object.values(enums_1.ProviderType)).required(),
    name: joi_1.default.string().required().min(1).max(200),
    location: common_validation_1.locationSchema.required(),
    capabilities: common_validation_1.providerCapabilitiesSchema.required(),
    capacity: common_validation_1.capacitySchema.required(),
    qualityMetrics: common_validation_1.qualityMetricsSchema.required(),
    costStructure: common_validation_1.costStructureSchema.required(),
    availability: common_validation_1.availabilitySchema.required(),
    credentials: common_validation_1.credentialsSchema.required(),
    isActive: joi_1.default.boolean().required()
}).concat(common_validation_1.baseEntitySchema);
/**
 * Provider creation input validation schema
 */
exports.createProviderInputSchema = joi_1.default.object({
    type: joi_1.default.string().valid(...Object.values(enums_1.ProviderType)).required(),
    name: joi_1.default.string().required().min(1).max(200),
    location: common_validation_1.locationSchema.required(),
    capabilities: common_validation_1.providerCapabilitiesSchema.required(),
    capacity: common_validation_1.capacitySchema.required(),
    qualityMetrics: common_validation_1.qualityMetricsSchema.required(),
    costStructure: common_validation_1.costStructureSchema.required(),
    availability: common_validation_1.availabilitySchema.required(),
    credentials: common_validation_1.credentialsSchema.required()
});
/**
 * Provider update input validation schema
 */
exports.updateProviderInputSchema = joi_1.default.object({
    name: joi_1.default.string().optional().min(1).max(200),
    location: common_validation_1.locationSchema.optional(),
    capabilities: common_validation_1.providerCapabilitiesSchema.optional(),
    capacity: common_validation_1.capacitySchema.optional(),
    qualityMetrics: common_validation_1.qualityMetricsSchema.optional(),
    costStructure: common_validation_1.costStructureSchema.optional(),
    availability: common_validation_1.availabilitySchema.optional(),
    credentials: common_validation_1.credentialsSchema.optional(),
    isActive: joi_1.default.boolean().optional()
}).min(1); // At least one field must be provided for update
/**
 * Provider search criteria validation schema
 */
exports.providerSearchCriteriaSchema = joi_1.default.object({
    type: joi_1.default.string().valid(...Object.values(enums_1.ProviderType)).optional(),
    specialties: joi_1.default.array().items(joi_1.default.string().min(1).max(100)).optional(),
    location: joi_1.default.object({
        coordinates: joi_1.default.object({
            lat: joi_1.default.number().required().min(-90).max(90),
            lng: joi_1.default.number().required().min(-180).max(180)
        }).required(),
        maxDistance: joi_1.default.number().required().min(0).max(1000)
    }).optional(),
    availableNow: joi_1.default.boolean().optional(),
    maxCost: joi_1.default.number().optional().min(0),
    minRating: joi_1.default.number().optional().min(1).max(5),
    acceptsInsurance: joi_1.default.array().items(joi_1.default.string().min(1).max(100)).optional(),
    languages: joi_1.default.array().items(joi_1.default.string().valid(...Object.values(enums_1.Language))).optional()
});
/**
 * Provider search result validation schema
 */
exports.providerSearchResultSchema = joi_1.default.object({
    provider: exports.providerSchema.required(),
    distance: joi_1.default.number().optional().min(0),
    matchScore: joi_1.default.number().required().min(0).max(100),
    availabilityStatus: joi_1.default.string().valid('available', 'busy', 'unavailable').required(),
    estimatedWaitTime: joi_1.default.number().optional().min(0)
});
/**
 * Capacity update input validation schema
 */
exports.updateCapacityInputSchema = joi_1.default.object({
    providerId: common_validation_1.uuidSchema.required(),
    availableBeds: joi_1.default.number().optional().min(0),
    currentLoad: joi_1.default.number().required().min(0).max(100)
});
/**
 * Validate provider object
 */
function validateProvider(provider) {
    return exports.providerSchema.validate(provider);
}
/**
 * Validate create provider input
 */
function validateCreateProviderInput(input) {
    return exports.createProviderInputSchema.validate(input);
}
/**
 * Validate update provider input
 */
function validateUpdateProviderInput(input) {
    return exports.updateProviderInputSchema.validate(input);
}
/**
 * Validate provider search criteria
 */
function validateProviderSearchCriteria(criteria) {
    return exports.providerSearchCriteriaSchema.validate(criteria);
}
/**
 * Validate update capacity input
 */
function validateUpdateCapacityInput(input) {
    return exports.updateCapacityInputSchema.validate(input);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZXItdmFsaWRhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWxpZGF0aW9uL3Byb3ZpZGVyLXZhbGlkYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDhCQUE4Qjs7Ozs7O0FBMEc5Qiw0Q0FFQztBQUtELGtFQUVDO0FBS0Qsa0VBRUM7QUFLRCx3RUFFQztBQUtELGtFQUVDO0FBdElELDhDQUFzQjtBQUN0QiwwQ0FBd0Q7QUFDeEQsMkRBVTZCO0FBRTdCOztHQUVHO0FBQ1UsUUFBQSxjQUFjLEdBQUcsYUFBRyxDQUFDLE1BQU0sQ0FBQztJQUN2QyxVQUFVLEVBQUUsOEJBQVUsQ0FBQyxRQUFRLEVBQUU7SUFDakMsSUFBSSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLG9CQUFZLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRTtJQUNuRSxJQUFJLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDO0lBQzdDLFFBQVEsRUFBRSxrQ0FBYyxDQUFDLFFBQVEsRUFBRTtJQUNuQyxZQUFZLEVBQUUsOENBQTBCLENBQUMsUUFBUSxFQUFFO0lBQ25ELFFBQVEsRUFBRSxrQ0FBYyxDQUFDLFFBQVEsRUFBRTtJQUNuQyxjQUFjLEVBQUUsd0NBQW9CLENBQUMsUUFBUSxFQUFFO0lBQy9DLGFBQWEsRUFBRSx1Q0FBbUIsQ0FBQyxRQUFRLEVBQUU7SUFDN0MsWUFBWSxFQUFFLHNDQUFrQixDQUFDLFFBQVEsRUFBRTtJQUMzQyxXQUFXLEVBQUUscUNBQWlCLENBQUMsUUFBUSxFQUFFO0lBQ3pDLFFBQVEsRUFBRSxhQUFHLENBQUMsT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFO0NBQ25DLENBQUMsQ0FBQyxNQUFNLENBQUMsb0NBQWdCLENBQUMsQ0FBQztBQUU1Qjs7R0FFRztBQUNVLFFBQUEseUJBQXlCLEdBQUcsYUFBRyxDQUFDLE1BQU0sQ0FBQztJQUNsRCxJQUFJLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsb0JBQVksQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQ25FLElBQUksRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7SUFDN0MsUUFBUSxFQUFFLGtDQUFjLENBQUMsUUFBUSxFQUFFO0lBQ25DLFlBQVksRUFBRSw4Q0FBMEIsQ0FBQyxRQUFRLEVBQUU7SUFDbkQsUUFBUSxFQUFFLGtDQUFjLENBQUMsUUFBUSxFQUFFO0lBQ25DLGNBQWMsRUFBRSx3Q0FBb0IsQ0FBQyxRQUFRLEVBQUU7SUFDL0MsYUFBYSxFQUFFLHVDQUFtQixDQUFDLFFBQVEsRUFBRTtJQUM3QyxZQUFZLEVBQUUsc0NBQWtCLENBQUMsUUFBUSxFQUFFO0lBQzNDLFdBQVcsRUFBRSxxQ0FBaUIsQ0FBQyxRQUFRLEVBQUU7Q0FDMUMsQ0FBQyxDQUFDO0FBRUg7O0dBRUc7QUFDVSxRQUFBLHlCQUF5QixHQUFHLGFBQUcsQ0FBQyxNQUFNLENBQUM7SUFDbEQsSUFBSSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztJQUM3QyxRQUFRLEVBQUUsa0NBQWMsQ0FBQyxRQUFRLEVBQUU7SUFDbkMsWUFBWSxFQUFFLDhDQUEwQixDQUFDLFFBQVEsRUFBRTtJQUNuRCxRQUFRLEVBQUUsa0NBQWMsQ0FBQyxRQUFRLEVBQUU7SUFDbkMsY0FBYyxFQUFFLHdDQUFvQixDQUFDLFFBQVEsRUFBRTtJQUMvQyxhQUFhLEVBQUUsdUNBQW1CLENBQUMsUUFBUSxFQUFFO0lBQzdDLFlBQVksRUFBRSxzQ0FBa0IsQ0FBQyxRQUFRLEVBQUU7SUFDM0MsV0FBVyxFQUFFLHFDQUFpQixDQUFDLFFBQVEsRUFBRTtJQUN6QyxRQUFRLEVBQUUsYUFBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRTtDQUNuQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsaURBQWlEO0FBRTVEOztHQUVHO0FBQ1UsUUFBQSw0QkFBNEIsR0FBRyxhQUFHLENBQUMsTUFBTSxDQUFDO0lBQ3JELElBQUksRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxvQkFBWSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7SUFDbkUsV0FBVyxFQUFFLGFBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7SUFDdkUsUUFBUSxFQUFFLGFBQUcsQ0FBQyxNQUFNLENBQUM7UUFDbkIsV0FBVyxFQUFFLGFBQUcsQ0FBQyxNQUFNLENBQUM7WUFDdEIsR0FBRyxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzdDLEdBQUcsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztTQUNoRCxDQUFDLENBQUMsUUFBUSxFQUFFO1FBQ2IsV0FBVyxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQztLQUN0RCxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQ2IsWUFBWSxFQUFFLGFBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDdEMsT0FBTyxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLFNBQVMsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDaEQsZ0JBQWdCLEVBQUUsYUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRTtJQUM1RSxTQUFTLEVBQUUsYUFBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxnQkFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRTtDQUN4RixDQUFDLENBQUM7QUFFSDs7R0FFRztBQUNVLFFBQUEsMEJBQTBCLEdBQUcsYUFBRyxDQUFDLE1BQU0sQ0FBQztJQUNuRCxRQUFRLEVBQUUsc0JBQWMsQ0FBQyxRQUFRLEVBQUU7SUFDbkMsUUFBUSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3hDLFVBQVUsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7SUFDbkQsa0JBQWtCLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsTUFBTSxFQUFFLGFBQWEsQ0FBQyxDQUFDLFFBQVEsRUFBRTtJQUNyRixpQkFBaUIsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztDQUNsRCxDQUFDLENBQUM7QUFFSDs7R0FFRztBQUNVLFFBQUEseUJBQXlCLEdBQUcsYUFBRyxDQUFDLE1BQU0sQ0FBQztJQUNsRCxVQUFVLEVBQUUsOEJBQVUsQ0FBQyxRQUFRLEVBQUU7SUFDakMsYUFBYSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzdDLFdBQVcsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7Q0FDckQsQ0FBQyxDQUFDO0FBRUg7O0dBRUc7QUFDSCxTQUFnQixnQkFBZ0IsQ0FBQyxRQUFhO0lBQzVDLE9BQU8sc0JBQWMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDM0MsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0IsMkJBQTJCLENBQUMsS0FBVTtJQUNwRCxPQUFPLGlDQUF5QixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNuRCxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQiwyQkFBMkIsQ0FBQyxLQUFVO0lBQ3BELE9BQU8saUNBQXlCLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ25ELENBQUM7QUFFRDs7R0FFRztBQUNILFNBQWdCLDhCQUE4QixDQUFDLFFBQWE7SUFDMUQsT0FBTyxvQ0FBNEIsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDekQsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0IsMkJBQTJCLENBQUMsS0FBVTtJQUNwRCxPQUFPLGlDQUF5QixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNuRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gUHJvdmlkZXIgdmFsaWRhdGlvbiBzY2hlbWFzXHJcblxyXG5pbXBvcnQgSm9pIGZyb20gJ2pvaSc7XHJcbmltcG9ydCB7IFByb3ZpZGVyVHlwZSwgTGFuZ3VhZ2UgfSBmcm9tICcuLi90eXBlcy9lbnVtcyc7XHJcbmltcG9ydCB7IFxyXG4gIGxvY2F0aW9uU2NoZW1hLFxyXG4gIHF1YWxpdHlNZXRyaWNzU2NoZW1hLFxyXG4gIGNvc3RTdHJ1Y3R1cmVTY2hlbWEsXHJcbiAgYXZhaWxhYmlsaXR5U2NoZW1hLFxyXG4gIGNyZWRlbnRpYWxzU2NoZW1hLFxyXG4gIGNhcGFjaXR5U2NoZW1hLFxyXG4gIHByb3ZpZGVyQ2FwYWJpbGl0aWVzU2NoZW1hLFxyXG4gIHV1aWRTY2hlbWEsXHJcbiAgYmFzZUVudGl0eVNjaGVtYVxyXG59IGZyb20gJy4vY29tbW9uLXZhbGlkYXRpb24nO1xyXG5cclxuLyoqXHJcbiAqIENvbXBsZXRlIHByb3ZpZGVyIHZhbGlkYXRpb24gc2NoZW1hXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcHJvdmlkZXJTY2hlbWEgPSBKb2kub2JqZWN0KHtcclxuICBwcm92aWRlcklkOiB1dWlkU2NoZW1hLnJlcXVpcmVkKCksXHJcbiAgdHlwZTogSm9pLnN0cmluZygpLnZhbGlkKC4uLk9iamVjdC52YWx1ZXMoUHJvdmlkZXJUeXBlKSkucmVxdWlyZWQoKSxcclxuICBuYW1lOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKS5taW4oMSkubWF4KDIwMCksXHJcbiAgbG9jYXRpb246IGxvY2F0aW9uU2NoZW1hLnJlcXVpcmVkKCksXHJcbiAgY2FwYWJpbGl0aWVzOiBwcm92aWRlckNhcGFiaWxpdGllc1NjaGVtYS5yZXF1aXJlZCgpLFxyXG4gIGNhcGFjaXR5OiBjYXBhY2l0eVNjaGVtYS5yZXF1aXJlZCgpLFxyXG4gIHF1YWxpdHlNZXRyaWNzOiBxdWFsaXR5TWV0cmljc1NjaGVtYS5yZXF1aXJlZCgpLFxyXG4gIGNvc3RTdHJ1Y3R1cmU6IGNvc3RTdHJ1Y3R1cmVTY2hlbWEucmVxdWlyZWQoKSxcclxuICBhdmFpbGFiaWxpdHk6IGF2YWlsYWJpbGl0eVNjaGVtYS5yZXF1aXJlZCgpLFxyXG4gIGNyZWRlbnRpYWxzOiBjcmVkZW50aWFsc1NjaGVtYS5yZXF1aXJlZCgpLFxyXG4gIGlzQWN0aXZlOiBKb2kuYm9vbGVhbigpLnJlcXVpcmVkKClcclxufSkuY29uY2F0KGJhc2VFbnRpdHlTY2hlbWEpO1xyXG5cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGNyZWF0aW9uIGlucHV0IHZhbGlkYXRpb24gc2NoZW1hXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUHJvdmlkZXJJbnB1dFNjaGVtYSA9IEpvaS5vYmplY3Qoe1xyXG4gIHR5cGU6IEpvaS5zdHJpbmcoKS52YWxpZCguLi5PYmplY3QudmFsdWVzKFByb3ZpZGVyVHlwZSkpLnJlcXVpcmVkKCksXHJcbiAgbmFtZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCkubWluKDEpLm1heCgyMDApLFxyXG4gIGxvY2F0aW9uOiBsb2NhdGlvblNjaGVtYS5yZXF1aXJlZCgpLFxyXG4gIGNhcGFiaWxpdGllczogcHJvdmlkZXJDYXBhYmlsaXRpZXNTY2hlbWEucmVxdWlyZWQoKSxcclxuICBjYXBhY2l0eTogY2FwYWNpdHlTY2hlbWEucmVxdWlyZWQoKSxcclxuICBxdWFsaXR5TWV0cmljczogcXVhbGl0eU1ldHJpY3NTY2hlbWEucmVxdWlyZWQoKSxcclxuICBjb3N0U3RydWN0dXJlOiBjb3N0U3RydWN0dXJlU2NoZW1hLnJlcXVpcmVkKCksXHJcbiAgYXZhaWxhYmlsaXR5OiBhdmFpbGFiaWxpdHlTY2hlbWEucmVxdWlyZWQoKSxcclxuICBjcmVkZW50aWFsczogY3JlZGVudGlhbHNTY2hlbWEucmVxdWlyZWQoKVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQcm92aWRlciB1cGRhdGUgaW5wdXQgdmFsaWRhdGlvbiBzY2hlbWFcclxuICovXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVQcm92aWRlcklucHV0U2NoZW1hID0gSm9pLm9iamVjdCh7XHJcbiAgbmFtZTogSm9pLnN0cmluZygpLm9wdGlvbmFsKCkubWluKDEpLm1heCgyMDApLFxyXG4gIGxvY2F0aW9uOiBsb2NhdGlvblNjaGVtYS5vcHRpb25hbCgpLFxyXG4gIGNhcGFiaWxpdGllczogcHJvdmlkZXJDYXBhYmlsaXRpZXNTY2hlbWEub3B0aW9uYWwoKSxcclxuICBjYXBhY2l0eTogY2FwYWNpdHlTY2hlbWEub3B0aW9uYWwoKSxcclxuICBxdWFsaXR5TWV0cmljczogcXVhbGl0eU1ldHJpY3NTY2hlbWEub3B0aW9uYWwoKSxcclxuICBjb3N0U3RydWN0dXJlOiBjb3N0U3RydWN0dXJlU2NoZW1hLm9wdGlvbmFsKCksXHJcbiAgYXZhaWxhYmlsaXR5OiBhdmFpbGFiaWxpdHlTY2hlbWEub3B0aW9uYWwoKSxcclxuICBjcmVkZW50aWFsczogY3JlZGVudGlhbHNTY2hlbWEub3B0aW9uYWwoKSxcclxuICBpc0FjdGl2ZTogSm9pLmJvb2xlYW4oKS5vcHRpb25hbCgpXHJcbn0pLm1pbigxKTsgLy8gQXQgbGVhc3Qgb25lIGZpZWxkIG11c3QgYmUgcHJvdmlkZWQgZm9yIHVwZGF0ZVxyXG5cclxuLyoqXHJcbiAqIFByb3ZpZGVyIHNlYXJjaCBjcml0ZXJpYSB2YWxpZGF0aW9uIHNjaGVtYVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHByb3ZpZGVyU2VhcmNoQ3JpdGVyaWFTY2hlbWEgPSBKb2kub2JqZWN0KHtcclxuICB0eXBlOiBKb2kuc3RyaW5nKCkudmFsaWQoLi4uT2JqZWN0LnZhbHVlcyhQcm92aWRlclR5cGUpKS5vcHRpb25hbCgpLFxyXG4gIHNwZWNpYWx0aWVzOiBKb2kuYXJyYXkoKS5pdGVtcyhKb2kuc3RyaW5nKCkubWluKDEpLm1heCgxMDApKS5vcHRpb25hbCgpLFxyXG4gIGxvY2F0aW9uOiBKb2kub2JqZWN0KHtcclxuICAgIGNvb3JkaW5hdGVzOiBKb2kub2JqZWN0KHtcclxuICAgICAgbGF0OiBKb2kubnVtYmVyKCkucmVxdWlyZWQoKS5taW4oLTkwKS5tYXgoOTApLFxyXG4gICAgICBsbmc6IEpvaS5udW1iZXIoKS5yZXF1aXJlZCgpLm1pbigtMTgwKS5tYXgoMTgwKVxyXG4gICAgfSkucmVxdWlyZWQoKSxcclxuICAgIG1heERpc3RhbmNlOiBKb2kubnVtYmVyKCkucmVxdWlyZWQoKS5taW4oMCkubWF4KDEwMDApXHJcbiAgfSkub3B0aW9uYWwoKSxcclxuICBhdmFpbGFibGVOb3c6IEpvaS5ib29sZWFuKCkub3B0aW9uYWwoKSxcclxuICBtYXhDb3N0OiBKb2kubnVtYmVyKCkub3B0aW9uYWwoKS5taW4oMCksXHJcbiAgbWluUmF0aW5nOiBKb2kubnVtYmVyKCkub3B0aW9uYWwoKS5taW4oMSkubWF4KDUpLFxyXG4gIGFjY2VwdHNJbnN1cmFuY2U6IEpvaS5hcnJheSgpLml0ZW1zKEpvaS5zdHJpbmcoKS5taW4oMSkubWF4KDEwMCkpLm9wdGlvbmFsKCksXHJcbiAgbGFuZ3VhZ2VzOiBKb2kuYXJyYXkoKS5pdGVtcyhKb2kuc3RyaW5nKCkudmFsaWQoLi4uT2JqZWN0LnZhbHVlcyhMYW5ndWFnZSkpKS5vcHRpb25hbCgpXHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFByb3ZpZGVyIHNlYXJjaCByZXN1bHQgdmFsaWRhdGlvbiBzY2hlbWFcclxuICovXHJcbmV4cG9ydCBjb25zdCBwcm92aWRlclNlYXJjaFJlc3VsdFNjaGVtYSA9IEpvaS5vYmplY3Qoe1xyXG4gIHByb3ZpZGVyOiBwcm92aWRlclNjaGVtYS5yZXF1aXJlZCgpLFxyXG4gIGRpc3RhbmNlOiBKb2kubnVtYmVyKCkub3B0aW9uYWwoKS5taW4oMCksXHJcbiAgbWF0Y2hTY29yZTogSm9pLm51bWJlcigpLnJlcXVpcmVkKCkubWluKDApLm1heCgxMDApLFxyXG4gIGF2YWlsYWJpbGl0eVN0YXR1czogSm9pLnN0cmluZygpLnZhbGlkKCdhdmFpbGFibGUnLCAnYnVzeScsICd1bmF2YWlsYWJsZScpLnJlcXVpcmVkKCksXHJcbiAgZXN0aW1hdGVkV2FpdFRpbWU6IEpvaS5udW1iZXIoKS5vcHRpb25hbCgpLm1pbigwKVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBDYXBhY2l0eSB1cGRhdGUgaW5wdXQgdmFsaWRhdGlvbiBzY2hlbWFcclxuICovXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVDYXBhY2l0eUlucHV0U2NoZW1hID0gSm9pLm9iamVjdCh7XHJcbiAgcHJvdmlkZXJJZDogdXVpZFNjaGVtYS5yZXF1aXJlZCgpLFxyXG4gIGF2YWlsYWJsZUJlZHM6IEpvaS5udW1iZXIoKS5vcHRpb25hbCgpLm1pbigwKSxcclxuICBjdXJyZW50TG9hZDogSm9pLm51bWJlcigpLnJlcXVpcmVkKCkubWluKDApLm1heCgxMDApXHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIHByb3ZpZGVyIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUHJvdmlkZXIocHJvdmlkZXI6IGFueSk6IHsgZXJyb3I/OiBhbnk7IHZhbHVlPzogYW55IH0ge1xyXG4gIHJldHVybiBwcm92aWRlclNjaGVtYS52YWxpZGF0ZShwcm92aWRlcik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBjcmVhdGUgcHJvdmlkZXIgaW5wdXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNyZWF0ZVByb3ZpZGVySW5wdXQoaW5wdXQ6IGFueSk6IHsgZXJyb3I/OiBhbnk7IHZhbHVlPzogYW55IH0ge1xyXG4gIHJldHVybiBjcmVhdGVQcm92aWRlcklucHV0U2NoZW1hLnZhbGlkYXRlKGlucHV0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIHVwZGF0ZSBwcm92aWRlciBpbnB1dFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVXBkYXRlUHJvdmlkZXJJbnB1dChpbnB1dDogYW55KTogeyBlcnJvcj86IGFueTsgdmFsdWU/OiBhbnkgfSB7XHJcbiAgcmV0dXJuIHVwZGF0ZVByb3ZpZGVySW5wdXRTY2hlbWEudmFsaWRhdGUoaW5wdXQpO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgcHJvdmlkZXIgc2VhcmNoIGNyaXRlcmlhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQcm92aWRlclNlYXJjaENyaXRlcmlhKGNyaXRlcmlhOiBhbnkpOiB7IGVycm9yPzogYW55OyB2YWx1ZT86IGFueSB9IHtcclxuICByZXR1cm4gcHJvdmlkZXJTZWFyY2hDcml0ZXJpYVNjaGVtYS52YWxpZGF0ZShjcml0ZXJpYSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSB1cGRhdGUgY2FwYWNpdHkgaW5wdXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVVwZGF0ZUNhcGFjaXR5SW5wdXQoaW5wdXQ6IGFueSk6IHsgZXJyb3I/OiBhbnk7IHZhbHVlPzogYW55IH0ge1xyXG4gIHJldHVybiB1cGRhdGVDYXBhY2l0eUlucHV0U2NoZW1hLnZhbGlkYXRlKGlucHV0KTtcclxufSJdfQ==