(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{5211:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/symptom-intake",function(){return t(9530)}])},9530:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var r=t(5893),a=t(7294),i=t(9008),o=t.n(i),l=t(7421),n=t(5087),m=t(7536),d=t(1163),c=t(1771),u=t(3431),p=t(1418),x=t(4034),y=t(5118),h=t(5983);let b=e=>{let{children:s,priority:t,placeholder:i,className:o="",onLoad:l,onError:n}=e,[m,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),y=(0,a.useRef)(null),b=(0,a.useRef)(null);return((0,a.useEffect)(()=>{let e=h.u.getLoadingStrategy("critical"===t?"critical":"assets");if("critical"===t||e.preload){x(!0);return}return e.lazy&&b.current?(y.current=new IntersectionObserver(e=>{let[s]=e;if(s.isIntersecting){var t;x(!0),null===(t=y.current)||void 0===t||t.disconnect()}},{rootMargin:"50px",threshold:.1}),y.current.observe(b.current)):x(!0),()=>{var e;null===(e=y.current)||void 0===e||e.disconnect()}},[t]),(0,a.useEffect)(()=>{!p||m||c||(async()=>{try{let e={poor:2e3,moderate:1e3,good:500,excellent:100}[h.u.getNetworkQuality()];await new Promise(s=>setTimeout(s,e)),d(!0),null==l||l()}catch(e){u(!0),null==n||n(e)}})()},[p,m,c,l,n]),c)?(0,r.jsx)("div",{className:"progressive-loader error ".concat(o),ref:b,children:(0,r.jsxs)("div",{className:"error-message",children:[(0,r.jsx)("p",{children:"Failed to load content"}),(0,r.jsx)("button",{onClick:()=>{u(!1),x(!0)},className:"retry-button",children:"Retry"})]})}):p&&m?(0,r.jsx)("div",{className:"progressive-loader loaded ".concat(o),ref:b,children:s}):(0,r.jsx)("div",{className:"progressive-loader loading ".concat(o),ref:b,children:i||(0,r.jsx)(g,{priority:t})})},g=e=>{let{priority:s}=e,t=h.u.getNetworkQuality();return(0,r.jsx)("div",{className:"loading-placeholder",children:(0,r.jsxs)("div",{className:"loading-skeleton",children:[(0,r.jsx)("div",{className:"skeleton-line"}),(0,r.jsx)("div",{className:"skeleton-line short"}),"critical"===s&&(0,r.jsxs)("div",{className:"loading-indicator",children:[(0,r.jsx)("div",{className:"spinner"}),(0,r.jsx)("span",{children:"Loading..."})]}),"poor"===t&&(0,r.jsx)("div",{className:"network-notice",children:(0,r.jsx)("span",{children:"Optimizing for slow connection..."})})]})})};var f=t(3644),v=()=>{let{t:e}=(0,l.$G)(),s=(0,d.useRouter)(),t=(0,y.k)(),[i,o]=(0,a.useState)(!1),[n,g]=(0,a.useState)(null),[v,j]=(0,a.useState)(h.u.getNetworkQuality()),{register:N,handleSubmit:k,formState:{errors:w},watch:I}=(0,m.cI)(),S=I("severity");a.useEffect(()=>{j(h.u.getNetworkQuality())},[]);let C=[{value:"lessThan1Hour",label:e("symptomIntake.durationOptions.lessThan1Hour")},{value:"1to6Hours",label:e("symptomIntake.durationOptions.1to6Hours")},{value:"6to24Hours",label:e("symptomIntake.durationOptions.6to24Hours")},{value:"1to3Days",label:e("symptomIntake.durationOptions.1to3Days")},{value:"3to7Days",label:e("symptomIntake.durationOptions.3to7Days")},{value:"1to4Weeks",label:e("symptomIntake.durationOptions.1to4Weeks")},{value:"moreThan4Weeks",label:e("symptomIntake.durationOptions.moreThan4Weeks")}],H=async r=>{o(!0),g(null);let a={primaryComplaint:r.primaryComplaint,duration:r.duration,severity:r.severity,associatedSymptoms:r.associatedSymptoms,medicalHistory:r.medicalHistory,inputMethod:"text"};try{if(t){let t=await p.ZP.submitSymptoms(a);if(t.success){var i;s.push("/episodes/".concat(null===(i=t.data)||void 0===i?void 0:i.episodeId))}else t.offline?(x.K.addToQueue({type:"symptom-intake",data:a}),s.push("/offline-confirmation")):g(t.error||e("symptomIntake.submitError"))}else x.K.addToQueue({type:"symptom-intake",data:a}),s.push("/offline-confirmation")}catch(e){x.K.addToQueue({type:"symptom-intake",data:a}),s.push("/offline-confirmation")}finally{o(!1)}};return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-0",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(f.er,{showDetails:!1})}),("poor"===v||!t)&&(0,r.jsx)("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 rounded-md border ".concat((e=>{let s={poor:"text-red-600 bg-red-50 border-red-200",moderate:"text-yellow-600 bg-yellow-50 border-yellow-200",good:"text-blue-600 bg-blue-50 border-blue-200",excellent:"text-green-600 bg-green-50 border-green-200"};return s[e]||s.moderate})(v)),children:(0,r.jsxs)("div",{className:"flex items-start sm:items-center",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 mr-2 sm:mr-3 flex-shrink-0 mt-0.5 sm:mt-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:t?"".concat(v.charAt(0).toUpperCase()+v.slice(1)," connection detected"):"You are offline"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:t?"Form has been optimized for your connection speed.":"Your data will be saved and submitted when connection is restored."})]})]})}),(0,r.jsx)(b,{priority:"critical",children:(0,r.jsx)("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 text-red-400 mt-0.5 flex-shrink-0"}),(0,r.jsx)("div",{className:"ml-2 sm:ml-3",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:e("symptomIntake.emergencyWarning")})})]})})}),(0,r.jsxs)("form",{onSubmit:k(H),className:"space-y-4 sm:space-y-6",children:[(0,r.jsx)(b,{priority:"critical",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"primaryComplaint",className:"block text-sm font-medium text-gray-700 mb-2",children:[e("symptomIntake.primaryComplaint")," *"]}),(0,r.jsx)("textarea",{id:"primaryComplaint",rows:"poor"===v?3:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base sm:text-sm",placeholder:e("symptomIntake.primaryComplaintPlaceholder"),...N("primaryComplaint",{required:e("symptomIntake.validation.primaryComplaintRequired"),minLength:{value:10,message:"Please provide more detail about your symptoms"}})}),w.primaryComplaint&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.primaryComplaint.message})]})}),(0,r.jsx)(b,{priority:"high",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-2",children:[e("symptomIntake.duration")," *"]}),(0,r.jsxs)("select",{id:"duration",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base sm:text-sm",...N("duration",{required:e("symptomIntake.validation.durationRequired")}),children:[(0,r.jsx)("option",{value:"",children:"Select duration..."}),C.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]}),w.duration&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.duration.message})]})}),(0,r.jsx)(b,{priority:"high",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"severity",className:"block text-sm font-medium text-gray-700 mb-2",children:[e("symptomIntake.severity")," *"]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("input",{type:"range",id:"severity",min:"1",max:"10",className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",...N("severity",{required:e("symptomIntake.validation.severityRequired"),min:{value:1,message:e("symptomIntake.validation.severityRange")},max:{value:10,message:e("symptomIntake.validation.severityRange")},valueAsNumber:!0})}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,r.jsx)("span",{children:"1 (Mild)"}),S&&(0,r.jsxs)("span",{className:"font-medium text-gray-700",children:["Current: ",S]}),(0,r.jsx)("span",{children:"10 (Severe)"})]})]}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e("symptomIntake.severityScale")}),w.severity&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.severity.message})]})}),(0,r.jsx)(b,{priority:"poor"===v?"low":"medium",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"associatedSymptoms",className:"block text-sm font-medium text-gray-700 mb-2",children:e("symptomIntake.associatedSymptoms")}),(0,r.jsx)("textarea",{id:"associatedSymptoms",rows:"poor"===v?2:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base sm:text-sm",placeholder:e("symptomIntake.associatedSymptomsPlaceholder"),...N("associatedSymptoms")})]})}),(0,r.jsx)(b,{priority:"poor"===v?"low":"medium",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"medicalHistory",className:"block text-sm font-medium text-gray-700 mb-2",children:e("symptomIntake.medicalHistory")}),(0,r.jsx)("textarea",{id:"medicalHistory",rows:"poor"===v?2:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base sm:text-sm",placeholder:e("symptomIntake.medicalHistoryPlaceholder"),...N("medicalHistory")})]})}),n&&(0,r.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:n})}),!t&&(0,r.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:e("offline.message")})}),h.u.isDataLimitExceeded()&&(0,r.jsx)("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-orange-700",children:"Data usage limit exceeded. Only essential features are available."})}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)("button",{type:"submit",disabled:i,className:"w-full sm:w-auto px-6 py-3 bg-primary-600 text-white font-medium rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed text-base sm:text-sm",children:i?e("common.loading"):e("common.submit")})})]})]})},j=()=>{let{t:e}=(0,l.$G)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsxs)("title",{children:[e("symptomIntake.title")," - Healthcare OS"]}),(0,r.jsx)("meta",{name:"description",content:"Report your symptoms and get personalized care recommendations"})]}),(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"w-full bg-white min-h-screen pb-12",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12",children:[(0,r.jsxs)("div",{className:"text-center mb-6 sm:mb-8 lg:mb-12",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 sm:mb-4",children:e("symptomIntake.title")}),(0,r.jsx)("p",{className:"text-sm sm:text-base lg:text-lg text-gray-600 max-w-2xl mx-auto",children:e("symptomIntake.subtitle")})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg sm:rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6 lg:p-8 max-w-2xl mx-auto",children:(0,r.jsx)(v,{})})]})})})]})}}},function(e){e.O(0,[664,660,536,87,888,774,179],function(){return e(e.s=5211)}),_N_E=e.O()}]);